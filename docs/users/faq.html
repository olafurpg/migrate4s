<html><head><title>scalafix: FAQ</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="ch.epfl.scala" /><meta name="description" content="Rewrite and linting tool for Scala" /><meta name="og:image" content="/scalafix/img/poster.png" /><meta name="og:title" content="scalafix: FAQ" /><meta name="og:site_name" content="scalafix" /><meta name="og:url" content="https://scalacenter.github.io/scalafix/" /><meta name="og:type" content="website" /><meta name="og:description" content="Rewrite and linting tool for Scala" /><link rel="icon" type="image/png" href="/scalafix/img/favicon.png" /><meta name="twitter:title" content="scalafix: FAQ" /><meta name="twitter:image" content="https://scalacenter.github.io/scalafix/img/poster.png" /><meta name="twitter:description" content="Rewrite and linting tool for Scala" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@scala_lang" /><link rel="icon" type="image/png" sizes="16x16" href="/scalafix/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalafix/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalafix/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalafix/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalafix/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalafix/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalafix/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalafix/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalafix/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalafix/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalafix/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalafix/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalafix/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalafix/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalafix/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalafix/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalafix/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalafix/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalafix/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalafix/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalafix/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/scalafix/css/style.css" /><link rel="stylesheet" href="/scalafix/css/palette.css" /><link rel="stylesheet" href="/scalafix/css/codemirror.css" /><link rel="stylesheet" href="/scalafix/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalafix/" class="brand"><div class="brand-wrapper"><span>scalafix</span></div></a></li> <li><a href="/scalafix/docs/users/installation" class="">Users</a> <ul class="sub_section"> <li><a href="/scalafix/docs/users/installation" class="">Installation</a></li> <li><a href="/scalafix/docs/users/rules" class="">Rules</a></li> <li><a href="/scalafix/docs/users/configuration" class="">Configuration</a></li> <li><a href="/scalafix/docs/users/faq" class=" active ">FAQ</a></li></ul></li> <li><a href="/scalafix/docs/rule-authors/setup" class="">Rule Authors</a> <ul class="sub_section"> <li><a href="/scalafix/docs/rule-authors/setup" class="">Setup</a></li> <li><a href="/scalafix/docs/rule-authors/tutorial" class="">Tutorial</a></li> <li><a href="/scalafix/docs/rule-authors/glossary" class="">Glossary</a></li> <li><a href="/scalafix/docs/api/scalafix/" class="">API Docs</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/scalacenter/scalafix"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/scalacenter/scalafix"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalafix Rewrite and linting tool for Scala');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalafix Rewrite and linting tool for Scala');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="scalacenter" data-github-repo="scalafix"><div class="content-wrapper"><section><h1 class="no_toc" id="faq">FAQ</h1>
<p>If you have any questions, don’t hesitate to ask on <a href="javascript:window.gitter.chat.defaultChat.toggleChat(true)">gitter</a>.</p>

<ul id="markdown-toc">
  <li><a href="#how-does-scalafix-compare-with-alternatives" id="markdown-toc-how-does-scalafix-compare-with-alternatives">How does Scalafix compare with alternatives?</a>    <ul>
      <li><a href="#intellij-scala" id="markdown-toc-intellij-scala">IntelliJ Scala</a></li>
      <li><a href="#wartremover" id="markdown-toc-wartremover">WartRemover</a></li>
      <li><a href="#scalastyle" id="markdown-toc-scalastyle">Scalastyle</a></li>
      <li><a href="#scala-refactoring" id="markdown-toc-scala-refactoring">Scala Refactoring?</a></li>
    </ul>
  </li>
  <li><a href="#i-get-resolution-errors-for-orgscalametasemanticdb-scalac" id="markdown-toc-i-get-resolution-errors-for-orgscalametasemanticdb-scalac">I get resolution errors for org.scalameta:semanticdb-scalac</a></li>
  <li><a href="#enclosing-tree-2873-does-not-include-tree-2872" id="markdown-toc-enclosing-tree-2873-does-not-include-tree-2872">Enclosing tree [2873] does not include tree [2872]</a></li>
  <li><a href="#i-get-exceptions-about-coursier" id="markdown-toc-i-get-exceptions-about-coursier">I get exceptions about coursier</a></li>
  <li><a href="#scalafix-doesnt-do-anything" id="markdown-toc-scalafix-doesnt-do-anything">Scalafix doesn’t do anything</a></li>
  <li><a href="#removeunusedimports-does-not-remove-unused-imports" id="markdown-toc-removeunusedimports-does-not-remove-unused-imports">RemoveUnusedImports does not remove unused imports</a></li>
  <li><a href="#ide-support" id="markdown-toc-ide-support">IDE support</a></li>
</ul>

<h2 id="how-does-scalafix-compare-with-alternatives">How does Scalafix compare with alternatives?</h2>

<p>There are many alternative tools to Scalafix, that each make different
tradeoffs with regards to Scala 2.x fidelity, ease of writing custom
analyses, interactivity, performance, integrations and feature support.
The table below provides a rough comparison, below are more detailed
explanations.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Scalafix</th>
      <th>IntelliJ Scala</th>
      <th>Scala Refactoring</th>
      <th>WartRemover</th>
      <th>ScalaStyle</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax model</td>
      <td>Scalameta</td>
      <td>IntelliJ Scala</td>
      <td>Scala Compiler</td>
      <td>Scala Compiler</td>
      <td>Scalariform</td>
    </tr>
    <tr>
      <td>Typechecker</td>
      <td>Scala Compiler</td>
      <td>IntelliJ Scala</td>
      <td>Scala Compiler</td>
      <td>Scala Compiler</td>
      <td>n/a</td>
    </tr>
    <tr>
      <td>Linting</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>Refactoring</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>No</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<h3 id="intellij-scala">IntelliJ Scala</h3>

<p>The IntelliJ Scala Plugin is probably the most used IDE for Scala development,
supporting a wide range of features to browse/edit/refactor Scala code.</p>

<ul>
  <li>Scalafix uses the Scala 2.x compiler to resolve symbols/types while
the IntelliJ Scala plugin uses it’s own own typechecker.
This means that if a project compiles with the Scala compiler,
then scalafix can analyze the source code (assuming no conflicting compiler plugins).
The IntelliJ Scala typechecker is known to produce false red squigglies.
It depends on what Scala features you use whether the IntelliJ Scala can analyze
your source code.</li>
  <li>Scalafix is primarily aimed to be used in batch-mode through a console interface
while IntelliJ is primarily aimed for interactive use in the IntelliJ IDE.</li>
  <li>IntelliJ Scala contains a lot more rules (“inspections” in IntelliJ terms),
including sophisticated refactorings such as “Organize imports” and
“Move class” that Scalafix does not currently support.</li>
</ul>

<p>The IntelliJ Scala Plugin will reportedly soon release a “Migrators API”,
according to this release: https://blog.jetbrains.com/scala/2016/11/11/intellij-idea-2016-3-rc-scala-js-scala-meta-and-more/
We look forward to see more of it!</p>

<h3 id="wartremover">WartRemover</h3>
<p><a href="http://www.wartremover.org/">WartRemover</a> is a flexible scala linter.</p>

<ul>
  <li>Scalafix runs <em>after</em> compilation as a separate tool,
WartRemover runs during compilation as a compiler plugin.</li>
  <li>Compilation overhead of the semanticdb-scalac compiler plugin (that Scalafix requires)
is ~20-30%, which is likely higher than the WartRemover compiler plugin (I haven’t measured).
Performance in semanticdb-scalac will be addressed in future releases.</li>
  <li>WartRemover has more linter rules out of the box than Scalafix.</li>
  <li>It is easier to write/test/share/run new/custom rules with Scalafix.
The Scalafix API does not require familiarity with scalac compiler internals.</li>
  <li>Scalafix is a linter and refactoring tool, which means Scalafix rules
can automatically fix some discovered problems. WartRemover is only a linter, it
does not support automatic fixing.</li>
  <li>Scalafix supports syntactic rules without going through the compiler,
this means that WartRemover rules like Null, Throw, FinalVal, asInstanceOf,
ExplicitImplicitTypes, Var, While can run faster outside of compilation
if implemented with Scalafix.</li>
</ul>

<h3 id="scalastyle">Scalastyle</h3>

<p><a href="http://www.scalastyle.org/">Scalastyle</a> is a Scala style checker.</p>

<ul>
  <li>Scalastyle has a lot more rules than Scalafix out of the box.</li>
  <li>Scalafix supports semantic and syntactic rules while Scalastyle supports only syntactic rules.
Semantic Scalafix rules know more about the types/symbols in your source code.
For example, a semantic rules can tell if <code class="highlighter-rouge">get</code> in <code class="highlighter-rouge">x.get</code> comes from <code class="highlighter-rouge">Option[T].get</code> or from another class that happens to also have a <code class="highlighter-rouge">.get</code> method.
Scalastyle is purely syntactic, which means it does not support rules that need information about types/symbols.</li>
  <li>Scalastyle runs as a separate tool outside of compilation, just like Scalafix.</li>
</ul>

<h3 id="scala-refactoring">Scala Refactoring?</h3>

<p><a href="https://github.com/scala-ide/scala-refactoring">Scala Refactoring</a> is a library providing automated refactoring support for Scala.</p>

<ul>
  <li>Scalafix rules uses the <a href="http://scalameta.org/">Scalameta</a> AST while Scala
Refactoring uses the Scala 2.x compiler AST.
The Scalameta AST encodes more syntactic details from the original
source file, including for-comprehensions, infix operators and
primary constructors. Example:
    <div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// scalameta AST
</span><span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">c</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
<span class="k">for</span> <span class="o">{</span>
  <span class="n">char</span> <span class="k">&lt;-</span> <span class="n">c</span>
  <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="sc">'a'</span>
  <span class="n">i</span> <span class="k">&lt;-</span> <span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="n">char</span><span class="o">.</span><span class="n">toInt</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span> <span class="n">i</span>
<span class="k">val</span> <span class="n">d</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="n">e</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="o">}</span>
<span class="c1">// Scala Compiler AST
</span><span class="k">package</span> <span class="err">&lt;</span><span class="nn">empty</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">A</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Product</span> <span class="k">with</span> <span class="n">scala</span><span class="o">.</span><span class="nc">Serializable</span> <span class="o">{</span>
  <span class="o">&lt;</span><span class="n">caseaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
  <span class="o">&lt;</span><span class="n">caseaccessor</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">paramaccessor</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">c</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
  <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;(</span><span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">c</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
    <span class="o">()</span>
  <span class="o">};</span>
  <span class="n">c</span><span class="o">.</span><span class="n">withFilter</span><span class="o">(((</span><span class="n">char</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">char</span><span class="o">.</span><span class="nc">$eq$eq</span><span class="o">(</span><span class="sc">'a'</span><span class="o">))).</span><span class="n">flatMap</span><span class="o">(((</span><span class="n">char</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="mf">1.</span><span class="n">to</span><span class="o">(</span><span class="n">char</span><span class="o">.</span><span class="n">toInt</span><span class="o">).</span><span class="n">map</span><span class="o">(((</span><span class="n">i</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">i</span><span class="o">))));</span>
  <span class="k">val</span> <span class="n">d</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="k">val</span> <span class="n">e</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="k">:</span> <span class="kt">@scala.unchecked</span> <span class="kt">match</span> <span class="o">{</span>
    <span class="kt">case</span> <span class="kt">List</span><span class="o">((</span><span class="kt">e</span> <span class="kt">@</span> <span class="o">(</span><span class="k">_</span><span class="kt">:</span> <span class="kt">Int</span><span class="o">)))</span> <span class="o">=&gt;</span> <span class="kt">e</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre>
    </div>
  </li>
  <li>Scala Refactoring requires a live instance of scala-compiler while
scalafix-core does not depend on scala-compiler. Scalafix only depends
on <a href="http://scalameta.org/tutorial/#SemanticDB">SemanticDB</a>. This has
positive and negative implications, for example
    <ul>
      <li>Scala Refactoring has always access to the full compiler APIs,
while changes to the Scalafix semantic API may require changing the
Scalameta SemanticDB schema.</li>
      <li>scalafix-core cross-builds to Scala.js, you can interactively explore
the Scalameta ASTs in the browser on <a href="https://astexplorer.net/#/gist/f0816de84a02654b8242de5822e672a2/8a7007dd2b292b955e005704f5823c24fab9bfeb">astexplorer.net</a>.</li>
      <li>The edit/run/debug cycle when developing Scalafix rules can be very fast
if you have a pre-built SemanticDB.
For example, in
<a href="https://github.com/olafurpg/scala-experiments">olafur/scala-experiments</a>
you can run semantic analysis on a corpus of 2.5M LOC in under 5 seconds
(more complicated analyses can take 1-2 minutes).
You can use that corpus to fuzz your Scalafix rules.
In Scala Refactoring, you must always re-compile sources to test
new changes in the rule you are developing.</li>
      <li>scala-compiler APIs expose internals of the Scala compiler, which
requires a certain level of expertise to accomplish even fairly
simple tasks. It is easy to get cryptic compiler errors in scala-compiler
if you accidentally break some assumed invariants.
SemanticDB on the other hand is a plain data schema, essentially
a small hierarchy of case classes. The entire schema is defined in
<a href="https://github.com/scalameta/scalameta/blob/master/langmeta/shared/src/main/protobuf/semanticdb.proto">60 lines of protobuf</a>.</li>
    </ul>
  </li>
</ul>

<h2 id="i-get-resolution-errors-for-orgscalametasemanticdb-scalac">I get resolution errors for org.scalameta:semanticdb-scalac</h2>
<p>Make sure you are using a supported Scala version: 2.11.12, 2.12.4.
Note, the version must match exactly, including the last number.</p>

<h2 id="enclosing-tree-2873-does-not-include-tree-2872">Enclosing tree [2873] does not include tree [2872]</h2>

<p>Scalafix requires code to compile with the scalac option <code class="highlighter-rouge">-Yrangepos</code>.
A macro that emits invalid tree positions is usually the cause of compiler errors
triggered by <code class="highlighter-rouge">-Yrangepos</code>. Other tools like the presentation compiler (ENSIME/Scala IDE) require
<code class="highlighter-rouge">-Yrangepos</code> to work properly.</p>

<h2 id="i-get-exceptions-about-coursier">I get exceptions about coursier</h2>
<p>If you use sbt-coursier, make sure you are on version 1.0.0-RC13.</p>

<h2 id="scalafix-doesnt-do-anything">Scalafix doesn’t do anything</h2>
<ul>
  <li>If you use sbt-scalafix, try <a href="/scalafix/docs/users/installation#verify-sbt-installation">Verify sbt installation</a></li>
  <li>Make sure that you are running at least one rule.</li>
  <li>Make sure that you are using a supported Scala version: 2.11.12, 2.12.4.</li>
</ul>

<h2 id="removeunusedimports-does-not-remove-unused-imports">RemoveUnusedImports does not remove unused imports</h2>
<p>Make sure that you followed the instructions in <a href="/scalafix/docs/rules/RemoveUnusedImports">RemoveUnusedImports</a> regarding scalac options.</p>

<h2 id="ide-support">IDE support</h2>
<p>Scalafix has no IDE support at the moment.
If you are interested in contributing IDE support for IntelliJ/ENSIME/vscode,
please reach out on <a href="javascript:window.gitter.chat.defaultChat.toggleChat(true)">gitter</a>!</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalafix/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/scalafix/js/addEditLinks.js"></script><script src="/scalafix/js/addSectionLinks.js"></script><script src="/scalafix/js/setCallToAction.js"></script><script src="/scalafix/js/removeSocialMediaLinks.js"></script><script>((window.gitter = {}).chat = {}).options = {
room: 'scalacenter/scalafix'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scalafix/js/main.js"></script></body></html>