<html><head><title>scalafix: Installation</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="ch.epfl.scala" /><meta name="description" content="Rewrite and linting tool for Scala" /><meta name="og:image" content="/scalafix/img/poster.png" /><meta name="og:title" content="scalafix: Installation" /><meta name="og:site_name" content="scalafix" /><meta name="og:url" content="https://scalacenter.github.io/scalafix/" /><meta name="og:type" content="website" /><meta name="og:description" content="Rewrite and linting tool for Scala" /><link rel="icon" type="image/png" href="/scalafix/img/favicon.png" /><meta name="twitter:title" content="scalafix: Installation" /><meta name="twitter:image" content="https://scalacenter.github.io/scalafix/img/poster.png" /><meta name="twitter:description" content="Rewrite and linting tool for Scala" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@scala_lang" /><link rel="icon" type="image/png" sizes="16x16" href="/scalafix/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalafix/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalafix/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalafix/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalafix/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalafix/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalafix/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalafix/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalafix/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalafix/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalafix/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalafix/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalafix/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalafix/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalafix/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalafix/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalafix/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalafix/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalafix/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalafix/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalafix/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/scalafix/css/style.css" /><link rel="stylesheet" href="/scalafix/css/palette.css" /><link rel="stylesheet" href="/scalafix/css/codemirror.css" /><link rel="stylesheet" href="/scalafix/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalafix/" class="brand"><div class="brand-wrapper"><span>scalafix</span></div></a></li> <li><a href="/scalafix/docs/users/installation" class="">Users</a> <ul class="sub_section"> <li><a href="/scalafix/docs/users/installation" class=" active ">Installation</a></li> <li><a href="/scalafix/docs/users/rules" class="">Rules</a></li> <li><a href="/scalafix/docs/users/configuration" class="">Configuration</a></li> <li><a href="/scalafix/docs/users/faq" class="">FAQ</a></li></ul></li> <li><a href="/scalafix/docs/rule-authors/setup" class="">Rule Authors</a> <ul class="sub_section"> <li><a href="/scalafix/docs/rule-authors/setup" class="">Setup</a></li> <li><a href="/scalafix/docs/rule-authors/tutorial" class="">Tutorial</a></li> <li><a href="/scalafix/docs/rule-authors/glossary" class="">Glossary</a></li> <li><a href="/scalafix/docs/api/scalafix/" class="">API Docs</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/scalacenter/scalafix"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/scalacenter/scalafix"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalafix Rewrite and linting tool for Scala');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalafix Rewrite and linting tool for Scala');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="scalacenter" data-github-repo="scalafix"><div class="content-wrapper"><section><p>To run scalafix on your project, you must first install the Scalafix sbt plugin
or command line interface.
Currently, Scalafix does not provide any IDE integrations with IntelliJ/ENSIME.</p>

<ul id="markdown-toc">
  <li><a href="#sbt-scalafix" id="markdown-toc-sbt-scalafix">sbt-scalafix</a>    <ul>
      <li><a href="#verify-installation" id="markdown-toc-verify-installation">Verify installation</a></li>
      <li><a href="#example-project" id="markdown-toc-example-project">Example project</a></li>
      <li><a href="#settings-and-tasks" id="markdown-toc-settings-and-tasks">Settings and tasks</a></li>
      <li><a href="#semanticdb-sbt" id="markdown-toc-semanticdb-sbt">semanticdb-sbt</a></li>
    </ul>
  </li>
  <li><a href="#scalafix-cli" id="markdown-toc-scalafix-cli">scalafix-cli</a>    <ul>
      <li><a href="#coursier" id="markdown-toc-coursier">Coursier</a></li>
      <li><a href="#homebrew" id="markdown-toc-homebrew">Homebrew</a></li>
      <li><a href="#wget" id="markdown-toc-wget">wget</a></li>
      <li><a href="#help" id="markdown-toc-help">–help</a></li>
    </ul>
  </li>
  <li><a href="#maven" id="markdown-toc-maven">Maven</a>    <ul>
      <li><a href="#install-semanticdb-compiler-plugin" id="markdown-toc-install-semanticdb-compiler-plugin">Install semanticdb compiler plugin</a></li>
      <li><a href="#compile-sources-with-semanticdb" id="markdown-toc-compile-sources-with-semanticdb">Compile sources with semanticdb</a></li>
      <li><a href="#run-scalafix-cli" id="markdown-toc-run-scalafix-cli">Run scalafix-cli</a></li>
    </ul>
  </li>
  <li><a href="#scalafix-core" id="markdown-toc-scalafix-core">scalafix-core</a></li>
  <li><a href="#snapshot" id="markdown-toc-snapshot">SNAPSHOT</a></li>
</ul>

<h2 id="sbt-scalafix">sbt-scalafix</h2>

<p>The sbt-plugin is the recommended integration to run semantic rules like RemoveUnusedImports or ExplicitResultTypes.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// ===&gt; project/plugins.sbt
</span><span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">"ch.epfl.scala"</span> <span class="o">%</span> <span class="s">"sbt-scalafix"</span> <span class="o">%</span> <span class="s">"0.5.10"</span><span class="o">)</span>

<span class="c1">// ===&gt; sbt shell
</span><span class="o">&gt;</span> <span class="n">scalafixEnable</span> <span class="c1">// Setup scalafix for active session.
</span>                 <span class="c1">// Not needed if build.sbt is configured like below.
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span>                                            <span class="c1">// Run all rules configured in .scalafix.conf
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="nc">RemoveUnusedImports</span>                 <span class="c1">// Run only RemoveUnusedImports rule
</span><span class="o">&gt;</span> <span class="n">myProject</span><span class="o">/</span><span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="nc">RemoveUnusedImports</span>       <span class="c1">// Run rule in one project only
</span><span class="o">&gt;</span> <span class="n">test</span><span class="k">:</span><span class="kt">scalafixCli</span> <span class="kt">--rule</span> <span class="kt">RemoveUnusedImports</span>            <span class="c1">// Run rule in single configuration
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="nc">ExplicitR</span><span class="o">&lt;</span><span class="nc">TAB</span><span class="o">&gt;</span>                      <span class="c1">// Use tab completion
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="n">replace</span><span class="k">:</span><span class="kt">com.foobar/com.buzbaz</span>       <span class="c1">// Refactor (experimental)
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="n">file</span><span class="k">:</span><span class="kt">rules/MyRule.scala</span>             <span class="c1">// Run local custom rule
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">rule</span> <span class="n">github</span><span class="k">:</span><span class="kt">org/repo/v1</span>                  <span class="c1">// Run library migration rule
</span><span class="o">&gt;</span> <span class="n">scalafixCli</span> <span class="o">--</span><span class="n">test</span>                                     <span class="c1">// Make sure no files needs to be fixed
</span>

<span class="c1">// (optional, to avoid need for scalafixEnable) permanently enable scalafix in build.sbt
// ===&gt; build.sbt
</span><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.12.4"</span> <span class="c1">// 2.11.12 is also supported.
</span>
<span class="c1">// If you get "-Yrangepos is required" error or "Missing compiler plugin semanticdb",
// This setting must appear after scalacOptions and libraryDependencies.
</span><span class="n">scalafixSettings</span>
<span class="c1">// or scalafixLibraryDependencies (Add semanticdb-scalac compiler plugin to libraryDependencies.)
// &amp; scalacOptions bellow
</span>
<span class="c1">// Similarly for sbt builds
</span><span class="n">sbtfixSettings</span>

<span class="c1">// To configure for custom configurations like IntegrationTest
</span><span class="n">scalafixConfigure</span><span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="nc">Test</span><span class="o">,</span> <span class="nc">IntegrationTest</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="verify-installation">Verify installation</h3>

<p>To verify the installation, check that scalacOptions and libraryDependecies
contain the values below.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span> <span class="n">show</span> <span class="n">scalacOptions</span>
<span class="o">[</span><span class="kt">info</span><span class="o">]</span> <span class="o">*</span> <span class="o">-</span><span class="nc">Yrangepos</span>                   <span class="c1">// required
</span><span class="o">[</span><span class="kt">info</span><span class="o">]</span> <span class="o">*</span> <span class="o">-</span><span class="nc">Xplugin</span><span class="o">-</span><span class="n">require</span><span class="k">:</span><span class="kt">semanticdb</span>  <span class="c1">// recommended
</span><span class="o">[</span><span class="kt">info</span><span class="o">]</span> <span class="o">*</span> <span class="o">-</span><span class="n">P</span><span class="k">:</span><span class="kt">semanticdb:sourceroot:/x</span>  <span class="c1">// recommended
</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">libraryDependencies</span>
<span class="o">[</span><span class="kt">info</span><span class="o">]</span> <span class="o">*</span> <span class="n">org</span><span class="o">.</span><span class="n">scalameta</span><span class="k">:</span><span class="kt">semanticdb-scalac:</span><span class="err">2</span><span class="kt">.</span><span class="err">1</span><span class="kt">.</span><span class="err">7</span><span class="kt">:plugin-&gt;default</span><span class="o">(</span><span class="kt">compile</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="example-project">Example project</h3>

<p>For a minimal example project using sbt-scalafix, see the <a href="https://github.com/scalacenter/scalafix-sbt-example">scalacenter/scalafix-sbt-example</a> repository.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="o">://</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">olafurpg</span><span class="o">/</span><span class="n">scalafix</span><span class="o">-</span><span class="n">sbt</span><span class="o">-</span><span class="n">example</span>
<span class="n">cd</span> <span class="n">scalafix</span><span class="o">-</span><span class="n">sbt</span><span class="o">-</span><span class="n">example</span>
<span class="n">sbt</span> <span class="s">"scalafix RemoveUnusedImports"</span>
<span class="n">git</span> <span class="n">diff</span> <span class="c1">// should produce a diff
</span></code></pre>
</div>

<h3 id="settings-and-tasks">Settings and tasks</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">scalafixCli &lt;args&gt;</code></td>
      <td><code class="highlighter-rouge">Unit</code></td>
      <td>Invoke scalafix command line interface directly. See <a href="/scalafix/docs/users/installation#cli">cli</a> or use tab completion to explore supported arguments</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafix &lt;rule&gt;..</code></td>
      <td><code class="highlighter-rouge">Unit</code></td>
      <td>Run scalafix on project sources. See <a href="/scalafix/docs/users/rules">Rules</a> or use tab completion to explore supported rules.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixTest &lt;rule&gt;..</code></td>
      <td><code class="highlighter-rouge">Unit</code></td>
      <td>Similar to the above task with the –test parameter</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">sbtfix &lt;rule&gt;..</code></td>
      <td><code class="highlighter-rouge">Unit</code></td>
      <td>Run scalafix on the build sources, <code class="highlighter-rouge">*.sbt</code> and <code class="highlighter-rouge">project/*</code>. <strong>Note</strong>: Only supports syntactic rules.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">sbtfixTest &lt;rule&gt;..</code></td>
      <td><code class="highlighter-rouge">Unit</code></td>
      <td>Similar to the above task with the –test parameter</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixConfig</code></td>
      <td><code class="highlighter-rouge">Option[File]</code></td>
      <td>.scalafix.conf file to specify which scalafix rules should run.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixScalacOptions</code></td>
      <td><code class="highlighter-rouge">Seq[String]</code></td>
      <td>Necessary Scala compiler settings for scalafix to work.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixScalaVersion</code></td>
      <td><code class="highlighter-rouge">String</code></td>
      <td>Which Scala version of scalafix-cli to run.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixSemanticdbVersion</code></td>
      <td><code class="highlighter-rouge">String</code></td>
      <td>Which version of org.scalameta:semanticdb-scalac to run.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixSourceRoot</code></td>
      <td><code class="highlighter-rouge">File</code></td>
      <td>The root directory of this project.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixVerbose</code></td>
      <td><code class="highlighter-rouge">Boolean</code></td>
      <td>If <code class="highlighter-rouge">true</code>, print out debug information.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixVersion</code></td>
      <td><code class="highlighter-rouge">String</code></td>
      <td>Which version of scalafix-cli to run.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalafixEnabled</code></td>
      <td><code class="highlighter-rouge">Boolean</code></td>
      <td>Deprecated. Use the scalafixEnable command or manually configure scalacOptions/libraryDependecies/scalaVersion</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scalametaSourceroot</code></td>
      <td><code class="highlighter-rouge">File</code></td>
      <td>Deprecated. Renamed to <code class="highlighter-rouge">scalafixSourceroot</code></td>
    </tr>
  </tbody>
</table>

<h3 id="semanticdb-sbt">semanticdb-sbt</h3>

<p><strong>⚠️ Experimental</strong></p>

<p>semanticdb-sbt is a Scala 2.10 compiler plugin that extracts semantic
information from the sbt compiler.
Note. semanticdb-sbt only works for <code class="highlighter-rouge">*.scala</code> files, it does not
support <code class="highlighter-rouge">*.sbt</code> files.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// project/plugins.sbt
</span><span class="n">addCompilerPlugin</span><span class="o">(</span><span class="s">"org.scalameta"</span> <span class="o">%</span> <span class="s">"semanticdb-sbt"</span> <span class="o">%</span> <span class="s">"0.4.0"</span> <span class="n">cross</span> <span class="nc">CrossVersion</span><span class="o">.</span><span class="n">full</span><span class="o">)</span>
</code></pre>
</div>

<p>Once enabled, you can run scalafix rules against <code class="highlighter-rouge">project/*.scala</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span> <span class="n">reload</span> <span class="c1">// rebuild semanticdb for project/*.scala sources
</span><span class="o">&gt;</span> <span class="n">sbtfix</span> <span class="nc">Sbt1</span>
</code></pre>
</div>

<h2 id="scalafix-cli">scalafix-cli</h2>

<p>The recommended way to install the scalafix command-line interface is with
<a href="https://github.com/coursier/coursier#command-line">coursier</a>.</p>

<h3 id="coursier">Coursier</h3>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>// coursier
coursier bootstrap ch.epfl.scala:scalafix-cli_2.12.4:0.5.10 -f --main scalafix.cli.Cli -o scalafix
./scalafix --help
</code></pre>
</div>

<h3 id="homebrew">Homebrew</h3>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>// homebrew
brew install --HEAD olafurpg/scalafmt/scalafix
scalafix --help
</code></pre>
</div>

<h3 id="wget">wget</h3>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>// wget
wget -O scalafix https://github.com/scalacenter/scalafix/blob/master/scalafix?raw<span class="o">=</span><span class="nb">true</span>
./scalafix --help
</code></pre>
</div>

<p>Once the scalafix cli is installed, consult the –help page for further usage instructions.</p>

<h3 id="help">–help</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>scalafix 0.5.10
Usage: scalafix [options] [&lt;file&gt;...]
  --usage  
        Print usage and exit
  --help | -h  
        Print help message and exit
  --version | -v  
        Print version number and exit
  --verbose  
        If set, print out debugging inforation to stderr.
  --config | -c  &lt;.scalafix.conf&gt;
        File path to a .scalafix.conf configuration file.
  --config-str | -c  &lt;imports.organize=false&gt;
        String representing scalafix configuration
  --sourceroot  &lt;/foo/myproject&gt;
        Absolute path passed to semanticdb with
	-P:semanticdb:sourceroot:&lt;path&gt;. Relative filenames persisted in the
	Semantic DB are absolutized by the sourceroot. Defaults to current
	working directory if not provided.
  --classpath  &lt;entry1.jar:entry2.jar:target/scala-2.12/classes/&gt;
        java.io.File.pathSeparator separated list of directories or jars
	containing '.semanticdb' files. The 'semanticdb' files are emitted by
	the semanticdb-scalac compiler plugin and are necessary for semantic
	rules like ExplicitResultTypes to function.
  --classpath-auto-roots  &lt;value&gt;
        Automatically infer --classpath starting from these directories.
	Ignored if --classpath is provided.
  --tool-classpath  &lt;entry1.jar:entry2.jar:target/scala-2.12/classes/&gt;
        Additional classpath to use when classloading/compiling rules
  --no-strict-semanticdb  
        Disable validation when loading semanticdb files.
  --rules | -r  &lt;ProcedureSyntax OR file:LocalFile.scala OR scala:full.Name OR https://gist.com/.../Rule.scala&gt;
        Scalafix rules to run.
  --stdout  
        If set, print fix to stdout instead of writing to file.
  --test  
        Exit non-zero code if files have not been fixed. Won't write to files.
  --out-from  &lt;/shared/&gt;
        Regex that is passed as first argument to
	fileToFix.replaceAll(outFrom, outTo)
  --out-to  &lt;/custom/&gt;
        Replacement string that is passed as second argument to
	fileToFix.replaceAll(outFrom, outTo)
  --exclude  &lt;core Foobar.scala&gt;
        Space separated list of regexes to exclude which files to fix. If a
	file match one of the exclude regexes, then it will not get fixed.
	Defaults to excluding no files.
  --single-thread  
        If true, run on single thread. If false (default), use all available
	cores
  --no-sys-exit  
        If true, does not sys.exit at the end. Useful for example in
	sbt-scalafix
  --quiet-parse-errors  
        Don't report parse errors for non-explictly passed filepaths.
  --bash  
        Print out bash completion file for scalafix. To install on scalafix
	--bash &gt; /usr/local/etc/bash_completion.d/scalafix # Mac scalafix
	--bash &gt; /etc/bash_completion.d/scalafix # Linux
  --zsh  
        Print out zsh completion file for scalafix. To install: scalafix --zsh
	&gt; /usr/local/share/zsh/site-functions/_scalafix
  --non-interactive  
        Don't use fancy progress bar.
  --project-id  &lt;value&gt;
        String ID to prefix reported messages with
  --diff  
        If set, only apply scalafix to added and edited files in git diff
	against master.
  --diff-base  &lt;value&gt;
        If set, only apply scalafix to added and edited files in git diff
	against a provided branch, commit or tag. (defaults to master)
Available rules: DottyKeywords, DisableSyntax, NoFinalize, NoValInForComprehension, RemoveXmlLiterals, LeakingImplicitClassVal, VolatileLazyVal, ProcedureSyntax, ExplicitUnit, DottyVolatileLazyVal, DottyVarArgPattern, NoInfer, Sbt1, ExplicitResultTypes, ExplicitReturnTypes, RemoveUnusedImports, RemoveUnusedTerms, NoAutoTupling, Disable, DisableUnless, MissingFinal

NOTE. The command line tool is mostly intended to be invoked programmatically
from build-tool integrations such as sbt-scalafix. The necessary fixture to run
semantic rules is tricky to setup manually.

Scalafix chooses which files to fix according to the following rules:
- scalafix &lt;directory&gt; &lt;rule&gt; finds *.scala files in &lt;directory&gt;
- when &lt;rule&gt; is semantic
  - if --classpath and --sourceroot are provided, then those are used to find .semanticdb files
  - otherwise, Scalafix will automatically look for META-INF/semanticdb directories from the
    current working directory.
- when --diff or --diff-branch is set it will parse the git diff and only
  apply on modified or added lines

  Those command will have the same effect:
    scalafix --diff
    scalafix --diff-branch=master

Examples (semantic):
  $ scalafix # automatically finds .semanticdb files and runs rule configured in .scalafix.conf.
  $ scalafix &lt;directory&gt; # same as above except only run on files in &lt;directory&gt;
  $ scalafix --rules RemoveUnusedImports # same as above but run RemoveUnusedImports.
  $ scalafix --classpath &lt;foo.jar:target/classes&gt; # explicitly pass classpath, --sourceroot is cwd.
  $ scalafix --classpath &lt;foo.jar:target/classes&gt; --sourceroot &lt;directory&gt;
  $ cat .scalafix.conf
  rules = [ProcedureSyntax]
  $ scalafix Code.scala # Same as --rules ProcedureSyntax

Exit status codes:
 Ok=0
 UnexpectedError=1
 ParseError=2
 ScalafixError=4
 InvalidCommandLineOption=8
 MissingSemanticApi=16
 StaleSemanticDB=32
 TestFailed=64
 LinterError=128

</code></pre>
</div>

<h2 id="maven">Maven</h2>

<p>It is possible to use scalafix with scala-maven-plugin but it requires a custom setup since there is no scalafix specific Maven plugin.</p>

<h3 id="install-semanticdb-compiler-plugin">Install semanticdb compiler plugin</h3>

<p>First, download the <code class="highlighter-rouge">semanticdb-scalac</code> compiler plugin which corresponds to your exact scala version of your project, down to the patch number.</p>

<p>To begin with, it’s recommended to install the coursier command line interface https://github.com/coursier/coursier.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wget https://github.com/coursier/coursier/raw/master/coursier &amp;&amp; chmod +x coursier &amp;&amp; ./coursier --help
</code></pre>
</div>

<p>Coursier is a tool to download and launch library artifacts.
Once you have coursier installed, assuming you are on 2.12.4:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>coursier fetch --intransitive org.scalameta:semanticdb-scalac_2.12.4:2.1.7
</code></pre>
</div>

<p>You can also use <code class="highlighter-rouge">wget</code> or a simalar tool to retrieve the jar from <code class="highlighter-rouge">https://repo1.maven.org/maven2/org/scalameta/semanticdb-scalac_2.12.4/2.1.7/semanticdb-scalac_2.12.4-2.1.7-javadoc.jar</code>.</p>

<h3 id="compile-sources-with-semanticdb">Compile sources with semanticdb</h3>

<p>Let’s say the <code class="highlighter-rouge">semanticdb-scalac_2.12.4-2.1.7.jar</code> is available in <code class="highlighter-rouge">PLUGINS/semanticdb-scalac_2.12.4-2.1.7.jar</code> path on your file system.</p>

<p>Recompile your project using <code class="highlighter-rouge">-DaddScalacArgs</code> as follow:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mvn clean test -DskipTests=true -DaddScalacArgs="-Yrangepos|-Xplugin-require:semanticdb|-Xplugin:PLUGIN/semanticdb-scalac_2.12.4-2.1.7.jar|-Ywarn-unused-import"
</code></pre>
</div>

<p>Here, we compile both main sources and tests to have semantic information generated for all of them, but we skip test execution because it is not the point of that compilation.
The added flags for scala are given with the <code class="highlighter-rouge">addScalaArgs</code> option (see http://davidb.github.io/scala-maven-plugin/help-mojo.html#addScalacArgs):</p>

<ul>
  <li><code class="highlighter-rouge">-Yrangepos</code> is required for <code class="highlighter-rouge">semanticdb</code> to function properly,</li>
  <li><code class="highlighter-rouge">-Xplugin:PLUGIN/semanticdb-scalac_2.12.4-2.1.7.jar</code> give the path where the <code class="highlighter-rouge">semanticdb</code> jar can be found,</li>
  <li>(optional) <code class="highlighter-rouge">-Xplugin-require:semanticdb</code> tells scalac to fails if it can’t load the <code class="highlighter-rouge">semanticdb</code> plugin,</li>
  <li>(optional) <code class="highlighter-rouge">-Ywarn-unused-import</code> is required for the <code class="highlighter-rouge">RemoveUnusedImports</code> rule. If you don’t run <code class="highlighter-rouge">RemoveUnusedImports</code> you can skip this flag. Consult the scalafix documentation for each rule to see which flags it requires.</li>
  <li>(optional) Customize the –sourceroot with <code class="highlighter-rouge">-P:semanticdb:sourceroot:/path/to/sourceroot</code> (more details below)</li>
</ul>

<p>After compilation, double check that there exists a directory <code class="highlighter-rouge">target/classes/META-INF/semanticdb/</code> containing files with the <code class="highlighter-rouge">.semanticdb</code> extension.</p>

<p><em>Important note</em>: you will need to recompile to get up-to-date <code class="highlighter-rouge">semanticdb</code> information after each modification.</p>

<h3 id="run-scalafix-cli">Run scalafix-cli</h3>

<p>Install and use <code class="highlighter-rouge">scalafix</code> as explained above.
One important note is that you need to give <code class="highlighter-rouge">--sourceroot</code> with the root path the same as the path where you ran your <code class="highlighter-rouge">mvn clent test</code> command.
This may be confusing when you are on a multi-module project.
For example, if your project is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>somepath/scalaProject
 |- moduleA
 |    |- src/{main, test}/scala
 |    `- target
 `- moduleB
      |- src/{main, test}/scala
      `- target
</code></pre>
</div>

<p>If you compile at <code class="highlighter-rouge">scalaProject</code> level, you will need to invoke scalafix with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scalafix --rules RemoveUnusedImports --sourceroot /path/to/somepath/scalaProject
</code></pre>
</div>

<p>But if you compiled at <code class="highlighter-rouge">moduleA</code> level only, you will need to use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scalafix --rules RemoveUnusedImports --sourceroot /path/to/somepath/scalaProject/moduleA
</code></pre>
</div>

<h2 id="scalafix-core">scalafix-core</h2>

<p>Scalafix can be used as a library to run custom rules.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// ===&gt; build.sbt
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"ch.epfl.scala"</span> <span class="o">%%</span> <span class="s">"scalafix-core"</span> <span class="o">%</span> <span class="s">"0.5.10"</span>
<span class="c1">// (optional) Scala.js is also supported
</span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"ch.epfl.scala"</span> <span class="o">%%%</span> <span class="s">"scalafix-core"</span> <span class="o">%</span> <span class="s">"0.5.10"</span>
</code></pre>
</div>

<p>Example usage of the syntactic API.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scalafix._</span>
<span class="k">import</span> <span class="nn">scala.meta._</span>

<span class="k">case</span> <span class="k">object</span> <span class="nc">Uppercase</span> <span class="k">extends</span> <span class="nc">Rule</span><span class="o">(</span><span class="s">"Uppercase"</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">fix</span><span class="o">(</span><span class="n">ctx</span><span class="k">:</span> <span class="kt">RuleCtx</span><span class="o">)</span><span class="k">:</span> <span class="kt">Patch</span> <span class="o">=</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">collect</span> <span class="o">{</span>
      <span class="k">case</span> <span class="n">name</span> <span class="k">@</span> <span class="nc">Name</span><span class="o">(</span><span class="n">value</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="n">replaceTree</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">.</span><span class="n">toUpperCase</span><span class="o">())</span>
    <span class="o">}.</span><span class="n">asPatch</span>
<span class="o">}</span>

</code></pre>
</div>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">println</span><span class="o">(</span><span class="nc">Uppercase</span><span class="o">(</span><span class="s">"object Hello { println('world) }"</span><span class="o">))</span>
<span class="c1">// object HELLO { PRINTLN('world) }
</span></code></pre>
</div>

<p>The semantic API requires a more complicated setup.
Please see <a href="/scalafix/docs/rule-authors/setup">Rule Authors</a>.</p>

<h2 id="snapshot">SNAPSHOT</h2>

<p>Our CI publishes a snapshot release to Sonatype on every merge into master.
Each snapshot release has a unique version number, jars don’t get overwritten.
To find the latest snapshot version number, go to <a href="https://oss.sonatype.org/content/repositories/snapshots/ch/epfl/scala/scalafix-core_2.12/">https://oss.sonatype.org/content/repositories/snapshots/ch/epfl/scala/scalafix-core_2.12/</a>
and select the version number at the bottom, the one with the latest “Last Modified”.
Once you have found the version number, adapting the version number</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// If using sbt-scalafix, add to project/plugins.sbt
resolvers += Resolver.sonatypeRepo("snapshots")
addSbtPlugin("ch.epfl.scala" % "sbt-scalafix" % "0.5.10-SNAPSHOT")

// If using scalafix-cli, launch with coursier
coursier launch ch.epfl.scala:scalafix-cli_2.12.4:0.5.10-SNAPSHOT -r sonatype:snapshots --main scalafix.cli.Cli -- --help
</code></pre>
</div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalafix/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/scalafix/js/addEditLinks.js"></script><script src="/scalafix/js/addSectionLinks.js"></script><script src="/scalafix/js/setCallToAction.js"></script><script src="/scalafix/js/removeSocialMediaLinks.js"></script><script>((window.gitter = {}).chat = {}).options = {
room: 'scalacenter/scalafix'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scalafix/js/main.js"></script></body></html>